%% https://codelab.interviewbit.com/problems/sumrootleaf/
-module(sumrootleaf).

-export([start/0]).

start() ->
    true and
        test(nil, 0) and
        test({1, nil, nil}, 1) and
        test({1, {2, nil, nil}, nil}, 12) and
        test({1, {2, nil, nil}, {3, nil, nil}}, 25) and
        test(fbcommon:tree_from_list([3,7,9,9,0,-1,-1,2,1,4,3,2,5,2,2,4,8,1,1,4,9,0,-1,8,3,5,2,5,-1,1,6,2,8,1,0,7,3,-1,7,-1,6,6,1,7,1,5,9,4,7,-1,7,-1,-1,-1,6,2,8,7,8,1,5,9,0,4,6,-1,-1,5,6,-1,2,1,8,2,5,5,-1,4,-1,1,9,1,4,3,5,7,4,-1,-1,0,6,7,5,-1,2,1,7,1,9,0,2,5,4,-1,-1,-1,-1,-1,8,2,2,-1,-1,-1,-1,-1,2,-1,3,9,4,8,8,6,4,7,2,5,7,1,-1,9,5,3,8,0,4,-1,-1,5,5,7,2,-1,-1,-1,8,0,4,4,5,5,7,-1,-1,5,6,3,-1,9,1,9,-1,8,-1,-1,9,-1,-1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,6,7,3,-1,1,8,-1,-1,1,8,-1,-1,-1,8,0,0,5,6,-1,-1,0,-1,9,-1,5,-1,6,6,-1,6,2,6,5,-1,-1,7,3,1,6,-1,7,6,-1,-1,6,-1,3,9,-1,-1,-1,0,-1,2,-1,0,-1,7,3,5,-1,8,2,0,6,8,7,3,9,0,1,0,-1,-1,-1,0,8,7,2,9,-1,6,6,6,-1,2,3,2,-1,-1,1,1,4,8,-1,2,0,-1,-1,-1,-1,-1,-1,1,3,6,-1,-1,-1,-1,5,4,1,7,7,-1,-1,-1,-1,-1,-1,0,8,0,-1,5,5,-1,7,3,-1,-1,1,-1,-1,-1,7,9,4,-1,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,0,5,5,-1,-1,-1,2,6,8,1,-1,0,-1,6,-1,0,-1,-1,-1,-1,-1,-1,6,8,2,-1,4,2,-1,1,-1,-1,-1,2,1,0,2,7,8,-1,1,-1,-1,3,4,-1,-1,-1,-1,-1,5,-1,-1,8,2,-1,-1,-1,-1,2,8,-1,3,-1,8,6,3,-1,-1,-1,8,6,4,-1,-1,-1,-1,5,-1,-1,-1,-1,-1,-1,9,4,-1,-1,-1,-1,-1,-1,-1,2,2,7,3,9,-1,-1,9,-1,-1,-1,-1,6,-1,3,8,-1,-1,-1,-1,-1,-1,-1,3,-1,-1,-1,-1,-1,-1,-1,-1,4,-1,2,-1,-1,-1,-1,2,-1,-1,1,9,1,-1,-1,2,5,1,-1,-1,4,2,-1,-1,-1,7,6,3,8,2,8,-1,-1,0,-1,-1,3,1,-1,-1,5,-1,-1,9,-1,2,-1,0,-1,-1,-1,8,-1,-1,8,-1,-1,0,-1,0,-1,7,-1,-1,1,4,-1,9,5,3,-1,-1,-1,2,3,-1,-1,-1,6,7,-1,0,6,-1,-1,-1,-1,-1,5,-1,-1,-1,5,-1,-1,-1,-1,-1,4,8,3,-1,-1,9,5,-1,-1,-1,9,0,-1,-1,-1,-1,-1,-1,-1,-1,4,-1,7,-1,-1,-1,-1,-1,-1,-1,4,0,-1,8,1,-1,5,-1,0,-1,-1,-1,-1,-1,1,1,0,-1,8,6,-1,-1,-1,-1,-1,-1,3,5,9,4,1,9,-1,-1,-1,-1,-1,6,-1,-1,-1,-1,-1,-1,5,-1,-1,9,-1,-1,0,-1,-1,-1,-1,0,1,-1,3,-1,8,-1,1,-1,-1,-1,-1,2,5,6,2,6,-1,6,6,4,-1,9,-1,-1,-1,-1,5,8,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,5,-1,7,-1,-1,-1,-1,9,4,2,1,8,-1,-1,-1,3,4,-1,-1,-1,-1,-1,-1,-1,5,-1,-1,-1,-1,-1,4,-1,9,-1,-1,-1,3,-1,-1,3,-1,-1,7,4,1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,-1,9,0,-1,-1,-1,2,6,-1,8,-1,-1,-1,-1,-1,2,-1,4,2,-1,-1,6,8,-1,-1,-1,-1,-1,4,-1,-1]),
             790) and
        true.


test(Tree, Expect) ->
    fbcommon:test(Tree, Expect, sumrootleaf(Tree)).


sumrootleaf(Tree) ->
    sumdeeper(Tree, 0).


sumdeeper(nil, _) ->
    0;
sumdeeper({Val, nil, nil}, Top) ->
    (Top * 10 + Val) rem 1003;
sumdeeper({Val, Left, Right}, Top) ->
    Cur = (Top * 10 + Val) rem 1003,
    LeftVal = sumdeeper(Left, Cur),
    RightVal = sumdeeper(Right, Cur),
    (LeftVal + RightVal) rem 1003.
